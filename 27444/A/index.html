<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function Plotter</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjs@9.4.4/dist/math.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        #graph {
            width: 100%;
            height: 500px;
        }
        .example-button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <section class="section">
        <div class="container">
            <h1 class="title">Mathematical Function Plotter</h1>
            <p class="subtitle">Enter a function to plot it. Use 'x' as the variable.</p>

            <!-- Input Field -->
            <div class="field">
                <label class="label">Function:</label>
                <div class="control">
                    <input id="function-input" class="input" type="text" placeholder="e.g., sin(x) + x^2">
                </div>
            </div>

            <!-- Examples -->
            <div class="examples">
                <button class="button is-info example-button" onclick="setExample('sin(x) + x^2')">Example 1</button>
                <button class="button is-info example-button" onclick="setExample('x^3 - 3*x + 1')">Example 2</button>
                <button class="button is-info example-button" onclick="setExample('ln(abs(x))')">Example 3</button>
                <button class="button is-info example-button" onclick="setExample('e^x*cos(x)')">Example 4</button>
                <button class="button is-info example-button" onclick="setExample('1/(x^2 + 1)')">Example 5</button>
            </div>

            <!-- Plot Area -->
            <div id="graph"></div>

            <!-- Instructions -->
            <p>Zoom by scrolling, pan by dragging, and hover for coordinates.</p>
        </div>
    </section>

    <script>
        const graphDiv = document.getElementById('graph');
        const inputField = document.getElementById('function-input');

        function plotFunction(func) {
            const xValues = math.range(-10, 10, 0.1).toArray();
            const yValues = xValues.map(x => {
                try {
                    return math.eval(func, { x });
                } catch (e) {
                    return null;
                }
            });

            const data = [{
                x: xValues,
                y: yValues,
                type: 'scatter',
                mode: 'lines',
                line: {color: 'blue'}
            }];

            const layout = {
                title: 'Function Plot',
                hovermode: 'closest'
            };

            Plotly.newPlot(graphDiv, data, layout);
        }

        function setExample(example) {
            inputField.value = example;
            plotFunction(example);
        }

        inputField.addEventListener('change', () => plotFunction(inputField.value));
        plotFunction(inputField.value); // Initial plot
    </script>
</body>
</html>