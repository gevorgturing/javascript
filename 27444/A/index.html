<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function Plotter</title>
    <style>
        body { font-family: 'Arial', sans-serif; background: #f4f4f9; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        #plot { width: 100%; height: 400px; margin-bottom: 20px; }
        input[type="text"] { width: calc(100% - 22px); padding: 10px; margin: 10px 0; }
        button { padding: 10px 15px; background-color: #007BFF; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        .examples { margin-top: 20px; }
        .example { background: #e9ecef; padding: 10px; margin: 5px 0; border-left: 4px solid #007BFF; }
        .copy-btn { float: right; background: #6c757d; }
        @media (max-width: 600px) {
            .container { padding: 10px; }
            #plot { height: 300px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Mathematical Function Plotter</h2>
    <input type="text" id="functionInput" placeholder="Enter your function here (e.g., sin(x) + ln(x))">
    <button onclick="plotFunction()">Plot</button>
    <div id="plot"></div>

    <div class="examples">
        <h3>Examples:</h3>
        <div class="example">
            sin(x) * x^2 <button class="copy-btn" onclick="copyExample('sin(x) * x^2')">Copy</button>
        </div>
        <div class="example">
            ln(abs(x)) + exp(-x) <button class="copy-btn" onclick="copyExample('ln(abs(x)) + exp(-x)')">Copy</button>
        </div>
        <div class="example">
            tan(x)/(1 + x^2) <button class="copy-btn" onclick="copyExample('tan(x)/(1 + x^2)')">Copy</button>
        </div>
        <div class="example">
            sqrt(x^3 - x + 1) <button class="copy-btn" onclick="copyExample('sqrt(x^3 - x + 1)')">Copy</button>
        </div>
        <div class="example">
            (sin(x))^2 + cos(x) <button class="copy-btn" onclick="copyExample('(sin(x))^2 + cos(x)')">Copy</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/mathjs@9.4.0/dist/math.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    function plotFunction() {
        const expr = document.getElementById('functionInput').value;
        const x = math.range(-10, 10, 0.1).toArray();
        let y;
        try {
            y = x.map(x => math.evaluate(expr, {x}));

            // Find critical points (simplified approach: look for local minima/maxima)
            let criticalPoints = [];
            for(let i = 1; i < y.length - 1; i++) {
                if((y[i] > y[i-1] && y[i] > y[i+1]) || (y[i] < y[i-1] && y[i] < y[i+1])) {
                    criticalPoints.push({x: x[i], y: y[i]});
                }
            }

            const trace = {
                x: x,
                y: y,
                type: 'scatter',
                mode: 'lines',
                name: 'Function'
            };

            const criticalTrace = {
                x: criticalPoints.map(p => p.x),
                y: criticalPoints.map(p => p.y),
                mode: 'markers',
                type: 'scatter',
                name: 'Critical Points',
                marker: { size: 8, color: 'red' }
            };

            const layout = {
                title: `Plot of ${expr}`,
                xaxis: {title: 'X'},
                yaxis: {title: 'Y'},
                hovermode: 'closest'
            };

            Plotly.newPlot('plot', [trace, criticalTrace], layout, {scrollZoom: true});
        } catch (e) {
            alert('Invalid function: ' + e.message);
        }
    }

    function copyExample(text) {
        document.getElementById('functionInput').value = text;
    }

    // Initial plot to show an example
    plotFunction();
</script>

</body>
</html>